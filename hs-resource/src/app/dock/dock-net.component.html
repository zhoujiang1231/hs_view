<div id="system-dock-area">
  <div class="import-btn">
    <button mat-button>批量导入</button>
    <input type="file" class="upload-input"
           ng2FileSelect multiple
           accept="text/csv"
           [uploader]="uploader"
           [disabled]="uploader.isUploading">
  </div>
  <app-page-header [title]="'对接网关'"
                   [leftButtons]="[{name: 'autorenew', action: 'renew'}]"
                   [rightButtons]="[{ title: '新建', action: 'add'},{ title: '导出', action: 'export'}]"
                   (tapRightBtn)="onClickBtnWithAction($event)"></app-page-header>
  <div class="h-100 position-relative">
    <div class="row head-search-container">
      <div class="col-3 container-input">
        <dl>
          <dt>网关名:</dt>
          <dd>
            <mat-form-field class="right-input" floatPlaceholder="never">
              <input matInput placeholder="请输入" [(ngModel)]="params.name">
            </mat-form-field>
          </dd>
        </dl>
      </div>
      <div class="col-3 container-input">
        <dl>
          <dt>IP地址:</dt>
          <dd>
            <mat-form-field class="right-input" floatPlaceholder="never">
              <input matInput placeholder="请输入" [(ngModel)]="params.ip">
            </mat-form-field>
          </dd>
        </dl>
      </div>
      <div class="col-6">
        <button mat-button class="search-button" (click)="reload()">搜索</button>
      </div>
    </div>
    <div *ngIf="isPermission === 1" class="table-container w-100">
      <ngx-datatable class="material striped"
                     [loadingIndicator]="loadingIndicator"
                     [rows]="dockNetData"
                     [headerHeight]="40"
                     [footerHeight]="40"
                     [rowHeight]="40"
                     [columnMode]="'force'"
                     [scrollbarH]="true"
                     [limit]="params.pageSize">
        <ngx-datatable-column [name]="'网关ID'" [prop]="'id'"></ngx-datatable-column>
        <ngx-datatable-column [name]="'网关名'" [prop]="'name'"></ngx-datatable-column>
        <ngx-datatable-column [name]="'网关所在中继组'" [prop]="'trunkGroupName'"></ngx-datatable-column>
        <ngx-datatable-column [name]="'ip地址'" [prop]="'ip'"></ngx-datatable-column>
        <ngx-datatable-column [name]="'sip端口号'" [prop]="'port'"></ngx-datatable-column>
        <ngx-datatable-column [name]="'所在地区号'" [prop]="'areacode'"></ngx-datatable-column>
        <ngx-datatable-column [name]="'容忍的CPS'" [prop]="'maxCps'" [width]="200"></ngx-datatable-column>
        <ngx-datatable-column [name]="'容忍的calls'" [prop]="'maxCalls'" [width]="200"></ngx-datatable-column>
        <ngx-datatable-column [name]="'是否激活'" [prop]="'activeName'"></ngx-datatable-column>
        <ngx-datatable-column [name]="'监测状态'" [prop]="'statusName'"></ngx-datatable-column>
        <ngx-datatable-column [name]="'设置描述'" [prop]="'description'" [width]="300"></ngx-datatable-column>
        <ngx-datatable-column [name]="'创建时间'" [width]="300">
          <ng-template let-row="row" ngx-datatable-cell-template>{{row?.createTime | dateFormat:'YYYY-MM-DD HH:mm:ss'}}</ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column [name]="'操作'">
          <ng-template let-row="row" let-rowIndex="rowIndex" ngx-datatable-cell-template>
        <span [matMenuTriggerFor]="menu" style="cursor: pointer">
          <mat-icon class="md-24" style="font-size: 16px;">more_vert</mat-icon>
        </span>
            <mat-menu #menu="matMenu">
              <button mat-menu-item *ngFor="let item of [{value:0,name:'编辑'},{value:1,name:'删除'}]"
                      [value]="item.value" (click)="operateButton(item.value, row, rowIndex)">{{item.name}}</button>
            </mat-menu>
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-footer>
          <ng-template ngx-datatable-footer-template>
            <app-pagination [pageParams]="params" [comTotalCount]="totalCount"
                            (limitChange)="getLimit($event)"
                            (pageParamsChange)="reload($event)"></app-pagination>
          </ng-template>
        </ngx-datatable-footer>
      </ngx-datatable>
    </div>
    <app-loading  *ngIf="isSpinner === 1" [top]="'258px'"></app-loading>
    <app-empty-data *ngIf="isPermission === 0"></app-empty-data>
  </div>
</div>
