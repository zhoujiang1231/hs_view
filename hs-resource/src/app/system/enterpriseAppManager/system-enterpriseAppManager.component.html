<div id="system-enterpriseAppManager-area">
    <div>
        <span class="linkSpan" (click)="customerManageTo('/index/customerManage/enterpriseBasicMessage')">企业基本信息</span>
        <span class="linkSpan" (click)="customerManageTo('/index/customerManage/enterpriseFirmMessage')">企业业务信息</span>
        <span class="linkSpan" (click)="customerManageTo('/index/customerManage/enterpriseAppManager')">企业应用管理</span>
    </div>
    <app-page-header [title]="'企业应用管理'"></app-page-header>
    <div class="h-100 position-relative">
        <div class="row head-search-container">
            <div class="col-2 container-input">
                <dl>
                    <dt>应用类型</dt>
                    <dd>
                        <mat-form-field class="right-input" [floatPlaceholder]="'never'">
                            <mat-select [(ngModel)]="addAppParams.type" placeholder="请选择">
                                <mat-option *ngFor="let item of [{name:'语音验证码'},{name:'语音通知'},{name:'总分机'},{name:'双向回呼'},{name:'自定义应用'},{name:'短信'},{name:'VOS'},{name:'USSD'},{name:'VNC'},{name:'SMAP'}]" [value]="item?.name">
                                    {{item?.name}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </dd>
                </dl>
            </div>
            <div class="col-2 container-input">
                <dl>
                    <dt>应用名称</dt>
                    <dd>
                        <mat-form-field class="right-input" [floatPlaceholder]="'never'">
                            <input matInput [(ngModel)]="addAppParams.appName">
                        </mat-form-field>
                    </dd>
                </dl>
            </div>
            <div class="col-2 container-input" *ngIf="addAppParams.type=='VNC'">
                <dl>
                    <dt>appKey</dt>
                    <dd>
                        <mat-form-field class="right-input" [floatPlaceholder]="'never'">
                            <input matInput [(ngModel)]="addAppParams.appKey">
                        </mat-form-field>
                    </dd>
                </dl>
            </div>
            <div class="col-2 container-input" *ngIf="addAppParams.type=='VNC'">
                <dl>
                    <dt>secretKey</dt>
                    <dd>
                        <mat-form-field class="right-input" [floatPlaceholder]="'never'">
                            <input matInput [(ngModel)]="addAppParams.secretKey">
                        </mat-form-field>
                    </dd>
                </dl>
            </div>
            <div class="col-2 container-input" *ngIf="addAppParams.type=='VNC'">
                <dl>
                    <dt>serviceType</dt>
                    <dd>
                        <mat-form-field class="right-input" [floatPlaceholder]="'never'">
                            <input matInput [(ngModel)]="addAppParams.serviceType">
                        </mat-form-field>
                    </dd>
                </dl>
            </div>
            <div class="col-2 container-input" *ngIf="addAppParams.type=='SMAP'">
                <dl>
                    <dt>tel</dt>
                    <dd>
                        <mat-form-field class="right-input" [floatPlaceholder]="'never'">
                            <input matInput [(ngModel)]="addAppParams.tel">
                        </mat-form-field>
                    </dd>
                </dl>
            </div>
            <div class="col-1 container-input">
                <button mat-button class="search-button" (click)="createApp()">新建</button>
            </div>
            <div class="col-1 container-input">
                <button mat-button class="search-button" (click)="addApp()">添加</button>
            </div>
        </div>
            <ngx-datatable class="material striped table-container"
                           [rows]="sysEnterpriseAppManagerData"
                           [headerHeight]="40"
                           [rowHeight]="40"
                           [columnMode]="'force'"
                           [scrollbarH]="true">
                <ngx-datatable-column [name]="'应用ID'" [prop]="'appId'" [maxWidth]="100"></ngx-datatable-column>
                <ngx-datatable-column [name]="'应用名称'" [prop]="'appName'" >
                    <ng-template let-row="row" let-rowIndex="rowIndex" let-value="value" ngx-datatable-cell-template>
                        <input (change)="appNameChange($event,row)" matInput type="text" value="{{row.appName}}">
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column [name]="'应用类型'" [prop]="'type'">
                    <ng-template let-row="row" let-rowIndex="rowIndex" let-value="value" ngx-datatable-cell-template>
                        <mat-select (change)="typeChange($event,row)" value="{{row.type}}">
                            <mat-option *ngFor="let item of [{name:'语音验证码'},{name:'语音通知'},{name:'总分机'},{name:'双向回呼'},{name:'自定义应用'},{name:'短信'},{name:'VOS'},{name:'USSD'},{name:'VNC'},{name:'SMAP'}]" [value]="item?.name">
                                {{item?.name}}
                            </mat-option>
                        </mat-select>
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column [name]="'应用状态'" [prop]="'status'" >
                    <ng-template let-row="row" let-rowIndex="rowIndex" let-value="value" ngx-datatable-cell-template>
                        <mat-select (change)="statusChange($event,row)" value="{{row.status}}">
                            <mat-option *ngFor="let item of [{name:'上线',value:'1'},{name:'测试',value:'2'},{name:'注销',value:'3'},{name:'停机',value:'4'}]" [value]="item?.value">
                                {{item?.name}}
                            </mat-option>
                        </mat-select>
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column [name]="'安全等级'" [prop]="'safetyLevel'" >
                    <ng-template let-row="row" let-rowIndex="rowIndex" let-value="value" ngx-datatable-cell-template>
                        <mat-select (change)="safetyLevelChange($event,row)" value="{{row.safetyLevel}}">
                            <mat-option *ngFor="let item of [{name:'请选择',value:'0'},{name:'安全',value:'1'},{name:'一般',value:'2'},{name:'危险',value:'3'}]" [value]="item?.value">
                                {{item?.name}}
                            </mat-option>
                        </mat-select>
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column [name]="'创建时间'" [prop]="'createTime'" >
                    <ng-template let-row="row" ngx-datatable-cell-template>{{row?.createTime | dateFormat:'YYYY-MM-DD HH:mm:ss'}}</ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column [name]="'上线时间'" [prop]="'uptime'" >
                    <ng-template let-row="row" ngx-datatable-cell-template>{{row?.uptime | dateFormat:'YYYY-MM-DD HH:mm:ss'}}</ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column [name]="'操作'" >
                    <ng-template let-row="row" ngx-datatable-cell-template>
        <span [matMenuTriggerFor]="menu" style="cursor: pointer">
          <mat-icon class="md-24" style="font-size: 16px;">more_vert</mat-icon>
        </span>
                        <mat-menu #menu="matMenu">
                            <button mat-menu-item *ngFor="let item of [{name:'查看',value:0},{name:'修改',value:1},{name:'配置',value:2},{name:'删除',value:3}]"
                                    [value]="item.value" (click)="operateButton(item.value, row)">{{item.name}}</button>
                        </mat-menu>
                    </ng-template>
                </ngx-datatable-column>
            </ngx-datatable>
    </div>
</div>
