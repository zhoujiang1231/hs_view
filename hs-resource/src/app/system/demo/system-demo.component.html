<div id="system-demo-area">
  <app-page-header [title]="'实例管理'"
                   [leftButtons]="[{name: 'autorenew', action: 'renew'}]"
                   [rightButtons]="[{ title: '新建', action: 'add'}]"
                   (tapRightBtn)="onClickBtnWithAction($event)"></app-page-header>
  <div *ngIf="isPermission === 1" class="pt-3 table-container w-100">
    <ngx-datatable class="material striped"
                   [loadingIndicator]="loadingIndicator"
                   [rows]="sysDemoData"
                   [headerHeight]="40"
                   [footerHeight]="40"
                   [rowHeight]="40"
                   [columnMode]="'force'"
                   [scrollbarH]="true"
                   [limit]="params.pageSize">
      <ngx-datatable-column [name]="'实例ID'" [prop]="'id'"></ngx-datatable-column>
      <ngx-datatable-column [name]="'实例名称'" [prop]="'name'"></ngx-datatable-column>
      <ngx-datatable-column [name]="'sip-router IP'" [prop]="'ip'"></ngx-datatable-column>
      <ngx-datatable-column [name]="'mi接口地址'" [prop]="'miUrl'" [width]="250"></ngx-datatable-column>
      <ngx-datatable-column [name]="'状态'" [prop]="'statusName'" [width]="80"></ngx-datatable-column>
      <ngx-datatable-column [name]="'uptime'" [prop]="'uptime'" [width]="500"></ngx-datatable-column>
      <ngx-datatable-column [name]="'是否激活'" [prop]="'activeName'" [width]="90"></ngx-datatable-column>
      <ngx-datatable-column [name]="'端口'" [prop]="'port'" [width]="90"></ngx-datatable-column>
      <ngx-datatable-column [name]="'rtpproxy状态'" [prop]="'rtpproxyStatus'"></ngx-datatable-column>
      <ngx-datatable-column [name]="'dns域名'" [prop]="'dns'" [width]="200"></ngx-datatable-column>
      <ngx-datatable-column [name]="'sip-router 外网ip'" [prop]="'externalIp'"></ngx-datatable-column>
      <ngx-datatable-column [name]="'dns外网域名'" [prop]="'externalDns'" [width]="200"></ngx-datatable-column>
      <ngx-datatable-column [name]="'描述'" [prop]="'description'" [width]="300"></ngx-datatable-column>
      <ngx-datatable-column [width]="1" [resizeable]="false"></ngx-datatable-column>
      <ngx-datatable-column [name]="'创建时间'" [width]="200">
        <ng-template let-row="row" ngx-datatable-cell-template>{{row?.createTime | dateFormat:'YYYY-MM-DD HH:mm:ss'}}</ng-template>
      </ngx-datatable-column>
      <ngx-datatable-column [name]="'操作'" [width]="70">
        <ng-template let-row="row" let-rowIndex="rowIndex" ngx-datatable-cell-template>
          <span [matMenuTriggerFor]="menu" style="cursor: pointer">
            <mat-icon class="md-24" style="font-size: 16px;">more_vert</mat-icon>
          </span>
          <mat-menu #menu="matMenu">
            <button mat-menu-item *ngFor="let item of [{value:0,name:'编辑'},{value:1,name:'删除'}]"
                    [value]="item.value" (click)="operateButton(item.value, row, rowIndex)">{{item.name}}</button>
          </mat-menu>
        </ng-template>
      </ngx-datatable-column>
      <ngx-datatable-footer>
        <ng-template ngx-datatable-footer-template>
          <app-pagination [pageParams]="params" [comTotalCount]="totalCount"
                          (limitChange)="getLimit($event)"
                          (pageParamsChange)="reloadSysDemo($event)"></app-pagination>
        </ng-template>
      </ngx-datatable-footer>
    </ngx-datatable>
  </div>
  <app-loading *ngIf="isSpinner === 1" [top]="'258px'"></app-loading>
  <app-empty-data *ngIf="isPermission === 0"></app-empty-data>
</div>
